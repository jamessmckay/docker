version: '3.7'

services:

    pgadmin:
        image: dpage/pgadmin4
        container_name: pgadmin
        volumes:
            - pgadmin-data
        ports:
            - 5050:80
        environment:
            - PGADMIN_DEFAULT_EMAIL=${PG_ADMIN_USER}
            - PGADMIN_DEFAULT_PASSWORD=${PG_ADMIN_PASSWORD}
        restart: on-failure

    pg11:
        image: postgres:11-alpine
        container_name: pg11
        volumes:
            - pg11-database:/var/lib/postgresql/data
        ports:
            - 5431:5432
        environment:
            - POSTGRES_PASSWORD=${PG_PASSWORD}
        restart: on-failure

    pg10:
        image: postgres:10-alpine
        container_name: pg10
        volumes:
            - pg10-database:/var/lib/postgresql/data
        ports:
            - 5430:5432
        environment:
            - POSTGRES_PASSWORD=${PG_PASSWORD}
        restart: on-failure

    mssql2017:
        image: mcr.microsoft.com/mssql/server:latest
        container_name: mssql2017
        volumes:
            - mssql2017-database:/var/opt/mssql
        ports:
            - 1433:1433
        environment:
            - ACCEPT_EULA=Y
            - SA_PASSWORD=${MSSQL_PASSWORD}
            - MSSQL_PID=Developer
        restart: on-failure

volumes:

    pg11-database:
        driver: local
        name: pg11-database

    pg10-database:
        driver: local
        name: pg10-database

    pgadmin-data:
        driver: local
        name: pgadmin-data

    mssql2017-database:
        driver: local
        name: mssql2017-database
